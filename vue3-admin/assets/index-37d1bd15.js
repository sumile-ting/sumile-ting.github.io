import{_ as A,l as q,h as w,x as K,v as j,d as D,G as R,e as x,o as r,c as y,f as S,w as v,b as i,y as o,z as T,j as f,t as b,m as g,B as C,n as U,r as J,s as k,F as N,g as M,a as F,H as B,I,J as L}from"./index-fd9b97e1.js";const O={key:0,class:"inline-flex ml-31px items-center"},E=i("i",{"inline-flex":"",class:"i-ep-arrow-left text-10px"},null,-1),G=[E],Q={class:"mx-15px"},W=i("i",{"inline-flex":"",class:"i-ep-arrow-right text-10px"},null,-1),Y=[W],Z={__name:"index",props:{miniView:{type:Boolean,default:!1},currentPage:{type:Number},pageSize:{type:Number},total:{type:Number}},emits:["update:currentPage"],setup(u,{emit:c}){const e=u,_=q(()=>e.miniView?"prev, pager, next, slot":"prev, pager, next, sizes, jumper"),s=w(0),a=w(1);K();function m(t){a.value=t,c("update:currentPage",Number(t))}function p(t){c("update:pageSize",Number(t))}j(a,t=>{m(t)});function h(){a.value!==1&&(a.value=a.value-1)}function n(){a.value!==e.total&&(a.value=a.value+1)}return D(()=>{s.value=Math.ceil(e.total/e.pageSize)}),R(()=>{s.value=Math.ceil(e.total/e.pageSize)}),(t,d)=>{const V=x("el-input"),$=x("el-pagination");return r(),y("div",{class:U(["sumile-pagination flex justify-end",{"pagination--mini":u.miniView}])},[S($,C({"page-sizes":[10,20,50,100],layout:o(_)},t.$attrs,{small:u.miniView,"pager-count":u.miniView?5:7,total:e.total,pageSize:e.pageSize,"current-page":e.miniView?Number(o(a)):e.currentPage,onSizeChange:p,onCurrentChange:m}),{default:v(()=>[e.miniView?(r(),y("div",O,[i("span",{class:"flex w-22px h-22px cursor-pointer items-center justify-center",onClick:h},G),S(V,{class:"w-48px mx-15px",size:"small",modelValue:o(a),"onUpdate:modelValue":d[0]||(d[0]=P=>T(a)?a.value=P:null)},null,8,["modelValue"]),f(" / "),i("span",Q,b(o(s)),1),i("span",{class:"flex w-22px h-22px cursor-pointer items-center justify-center",onClick:n},Y)])):g("v-if",!0)]),_:1},16,["layout","small","pager-count","total","pageSize","current-page"])],2)}}},ee=A(Z,[["__file","F:/online/project-vue3/src/components/sumile-pagination/index.vue"]]),te=(u="id",c)=>{const e=w([]);function _(a){e.value=a}function s(){c.value.clearSelection()}return{selected:e,selectionChange:_,clearSelection:s}},ae=(u,c,e,_)=>{const s=J({currentPage:1,pageSize:_}),a=w({total:0,records:[]});async function m(){const n=e?JSON.parse(JSON.stringify(s)):{};let{data:t}=await u(n);t=c?c(t.data):t.data,a.value=t}function p(n){s.pageSize=n,m()}function h(n){s.currentPage=n,m()}return j(()=>s.currentPage,n=>h(n)),j(()=>s.pageSize,n=>p(n)),{page:s,tableData:a,getTableData:m,handleSizeChange:p,handleCurrentChange:h}};const ne={class:"sumile-table-wrapper"},oe={key:0,class:"sumile-table-header mb-12px"},se={class:"header-button-lf"},le={key:1,class:"sumile-table-alert mt-15px"},ie={class:"c-gray"},re={style:{color:"var(--el-color-primary-light-3)"}},ue={class:"c-black-085 ml-10px"},ce={class:"mx-5px"},pe={__name:"index",props:{columns:{type:Array,required:!0,default:()=>[]},pagination:{type:Boolean,default:!0},pageSize:{type:Number,default:20},requestApi:{type:Function,required:!0,default:()=>{}},showAlert:{type:Boolean,default:!0},rowKey:{type:[String,Function],default:"id"},dataCallBack:{type:Function,default:null},miniView:{type:Boolean,default:!1}},setup(u,{expose:c}){const e=u,_=w(),{selected:s,selectionChange:a,clearSelection:m}=te(e.rowKey,_),{tableData:p,getTableData:h,page:n}=ae(e.requestApi,e.dataCallBack,e.pagination,e.pageSize);return D(()=>{h()}),c({getTableData:h,page:n}),(t,d)=>{const V=x("el-table-column"),$=x("el-table"),P=x("el-button"),H=x("el-tag"),X=ee;return r(),y("div",ne,[g(" 表格头部 操作按钮 "),t.$slots.tableHeader?(r(),y("div",oe,[i("div",se,[k(t.$slots,"tableHeader",{selectedList:o(s)},void 0,!0)])])):g("v-if",!0),g(" 表格主体 "),S($,C({border:"",stripe:"",height:"100%",ref_key:"tableRef",ref:_},t.$attrs,{data:o(p).records,"row-key":e.rowKey,onSelectionChange:o(a)}),{default:v(()=>[g(" el-table 默认插槽 "),k(t.$slots,"default",{},void 0,!0),(r(!0),y(N,null,M(e.columns,(l,de)=>(r(),F(V,B(I(l)),L({_:2},[l.slot?{name:"default",fn:v(({row:z})=>[t.$slots[l.prop]?k(t.$slots,l.prop,B(C({key:0},{row:z})),void 0,!0):(r(),y(N,{key:1},[f(b(z[l.prop]),1)],64))]),key:"0"}:void 0,l.headerSlot?{name:"header",fn:v(({column:z})=>[t.$slots[l.prop+"Header"]?k(t.$slots,l.prop+"Header",B(C({key:0},{column:z})),void 0,!0):(r(),y(N,{key:1},[f(b(l.label),1)],64))]),key:"1"}:void 0]),1040))),256))]),_:3},16,["data","row-key","onSelectionChange"]),g(" 表格下方的已选择XXx项共计XXX条数据 "),e.showAlert?(r(),y("div",le,[S(H,null,{default:v(()=>[i("div",null,[i("span",ie,[f("已选择"),i("span",re,b(o(s).length),1),f("项")]),i("span",ue,[f("共计"),i("span",ce,b(o(p).total),1),f("条数据")])]),S(P,{type:"primary",text:"",onClick:d[0]||(d[0]=l=>o(m)())},{default:v(()=>[f(" 清空已选 ")]),_:1})]),_:1})])):g("v-if",!0),g(" 表格分页 "),e.pagination&&o(p).total?(r(),F(X,{key:2,"current-page":o(n).currentPage,"onUpdate:currentPage":d[1]||(d[1]=l=>o(n).currentPage=l),"page-size":o(n).pageSize,"onUpdate:pageSize":d[2]||(d[2]=l=>o(n).pageSize=l),total:o(p).total,miniView:e.miniView},null,8,["current-page","page-size","total","miniView"])):g("v-if",!0)])}}},_e=A(pe,[["__scopeId","data-v-10b29390"],["__file","F:/online/project-vue3/src/components/sumile-table/index.vue"]]);export{_e as _};
